<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physics Letters</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100dvh;
      width: 100dvw;
      overflow: hidden;
      background: white;
      font-family: Arial, sans-serif;
    }
    #scene {
      position: relative;
      width: 100dvw;
      height: 100dvh;
    }
    .letter {
      position: absolute;
      font-size: 2rem;
      user-select: none;
      cursor: grab;
    }
  </style>
</head>
<body>
  <div id="scene"></div>
  <script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>
  <script>
    const { Engine, Render, Runner, Bodies, Composite, Events, Mouse, MouseConstraint, Body } = Matter;

    const engine = Engine.create();
    const world = engine.world;

    const width = window.innerWidth;
    const height = window.innerHeight;

    const scene = document.getElementById('scene');

    const render = Render.create({
      element: scene,
      engine: engine,
      options: {
        width: width,
        height: height,
        wireframes: false,
        background: 'transparent'
      }
    });

    Render.run(render);
    Runner.run(Runner.create(), engine);

    // Walls
    const walls = [
      Bodies.rectangle(width / 2, height + 25, width, 50, { isStatic: true }), // bottom
      Bodies.rectangle(width / 2, -25, width, 50, { isStatic: true }), // top
      Bodies.rectangle(-25, height / 2, 50, height, { isStatic: true }), // left
      Bodies.rectangle(width + 25, height / 2, 50, height, { isStatic: true }) // right
    ];
    Composite.add(world, walls);

    // Drag support
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: {
        stiffness: 0.2,
        render: { visible: false }
      }
    });
    Composite.add(world, mouseConstraint);
    render.mouse = mouse;

    // Generate a random letter
    function randomLetter() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      return chars[Math.floor(Math.random() * chars.length)];
    }

    function createLetter(x, y) {
      const letter = randomLetter();

      // Create DOM element
      const el = document.createElement('div');
      el.className = 'letter';
      el.textContent = letter;
      scene.appendChild(el);

      // Measure it
      el.style.left = '-1000px';
      el.style.top = '-1000px';
      document.body.appendChild(el);
      const rect = el.getBoundingClientRect();
      el.remove();

      const w = rect.width;
      const h = rect.height;

      // Add body
      const body = Bodies.rectangle(x, y, w, h, {
        restitution: 0.7,
        friction: 0.2,
        frictionAir: 0.01
      });

      Composite.add(world, body);

      // Sync position every frame
      Events.on(engine, 'beforeUpdate', () => {
        el.style.left = `${body.position.x - w / 2}px`;
        el.style.top = `${body.position.y - h / 2}px`;
      });
    }

    window.addEventListener('click', e => {
      createLetter(e.clientX, e.clientY);
    });

    window.addEventListener('resize', () => {
      // Optional: Add resize handling
    });
  </script>
</body>
</html>